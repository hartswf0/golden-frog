<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Frog Competition: Interactive Narrative</title>
    <style>
        :root {
            --primary-green: #2ecc71;
            --secondary-green: #27ae60;
            --dark-background: #2c3e50;
            --light-text: #ecf0f1;
            --accent-color: #e74c3c;
            --box-size: 80px;
            --circle-size: 300px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--dark-background);
            color: var(--light-text);
            overscroll-behavior: none;
        }

        .golden-frog-app {
            max-width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
            perspective: 1000px;
        }

        header {
            text-align: center;
            padding: 20px;
        }

        .spinning-circle {
            width: var(--circle-size);
            height: var(--circle-size);
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
            position: relative;
            transform-style: preserve-3d;
            animation: spin 60s linear infinite;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            margin-top: 50px;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .narrative-box {
            position: absolute;
            width: var(--box-size);
            height: var(--box-size);
            background-color: rgba(0,0,0,0.8);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 12px;
            text-align: center;
            padding: 5px;
        }

        .narrative-box:hover {
            transform: scale(1.2) rotate(15deg);
            background-color: var(--accent-color);
            z-index: 1;
        }

        .narrative-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            padding: 20px;
        }

        .narrative-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        .narrative-content {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            text-align: center;
            position: relative;
        }

        .input-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            width: 100%;
            max-width: 400px;
        }

        .narrative-input {
            width: 80%;
            padding: 10px;
            margin: 20px 0;
            border-radius: 20px;
            border: 2px solid var(--primary-green);
            font-size: 16px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            color: var(--light-text);
        }

        .submit-btn, .close-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            font-size: 14px;
        }

        .submit-btn:hover, .close-btn:hover {
            background-color: var(--primary-green);
            transform: scale(1.05);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            color: white;
            font-size: 30px;
            line-height: 30px;
        }

        .hidden {
            display: none;
        }

        .data-visualization {
            margin-top: 20px;
            width: 100%;
            height: 200px;
        }

        .user-narrative {
            background: rgba(255,255,255,0.2);
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            text-align: left;
            color: #fff;
        }

        .nominee-list {
            list-style: none;
            padding: 0;
            margin-top: 10px;
            text-align: left;
        }

        .nominee-list li {
            margin-bottom: 5px;
        }

        @media (max-width: 600px) {
            .spinning-circle {
                width: 250px;
                height: 250px;
            }

            .narrative-box {
                width: 60px;
                height: 60px;
                font-size: 10px;
            }

            .narrative-input {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="golden-frog-app">
        <header>
            <h1>Golden Frog Competition</h1>
        </header>
        
        <main class="game-container">
            <div id="spinning-circle" class="spinning-circle">
                <!-- Narrative paths will be dynamically generated here -->
            </div>
            
            <div id="narrative-overlay" class="narrative-overlay hidden">
                <div class="narrative-content">
                    <button id="close-narrative" class="close-btn">×</button>
                    <div id="narrative-content-inner">
                        <!-- Dynamic content goes here -->
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <input 
                    type="text" 
                    id="user-input" 
                    placeholder="Share Your Golden Frog Journey" 
                    class="narrative-input"
                >
                <button id="submit-narrative" class="submit-btn">Hop In!</button>
            </div>
        </main>
    </div>

    <script>
        // Fake data embedded directly for experimentation
        const camerimageData = {
          "CamerimageFestival": {
            "Categories": [
              {
                "CategoryName": "Golden Frog Competition",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "GF1993-001",
                    "NomineeName": "Anna Kowalski",
                    "Gender": "Female",
                    "FilmTitle": "Light Shadows",
                    "Country": "Poland"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "GF1994-002",
                    "NomineeName": "John Smith",
                    "Gender": "Male",
                    "FilmTitle": "Silent Echoes",
                    "Country": "USA"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "GF1995-003",
                    "NomineeName": "Maria Garcia",
                    "Gender": "Female",
                    "FilmTitle": "Nightfall Symphony",
                    "Country": "Spain"
                  },
                  {
                    "Year": 2000,
                    "NomineeID": "GF2000-010",
                    "NomineeName": "Alex Müller",
                    "Gender": "Male",
                    "FilmTitle": "Urban Nights",
                    "Country": "Germany"
                  },
                  {
                    "Year": 2018,
                    "NomineeID": "GF2018-020",
                    "NomineeName": "Elena Ramirez",
                    "Gender": "Female",
                    "FilmTitle": "Dawn of Light",
                    "Country": "Mexico"
                  },
                  {
                    "Year": 2020,
                    "NomineeID": "GF2020-025",
                    "NomineeName": "Liam Johnson",
                    "Gender": "Male",
                    "FilmTitle": "Silent Echoes",
                    "Country": "Canada"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "GF2024-032",
                    "NomineeName": "Li Wei",
                    "Gender": "Female",
                    "FilmTitle": "Reflections of Time",
                    "Country": "China"
                  }
                ]
              },
              {
                "CategoryName": "Silver Frog Competition",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "SF1993-001",
                    "NomineeName": "David Brown",
                    "Gender": "Male",
                    "FilmTitle": "Morning Dew",
                    "Country": "UK"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "SF1994-002",
                    "NomineeName": "Elena Petrova",
                    "Gender": "Female",
                    "FilmTitle": "Twilight Whisper",
                    "Country": "Russia"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "SF1995-003",
                    "NomineeName": "Michael Nguyen",
                    "Gender": "Male",
                    "FilmTitle": "Dawn Chorus",
                    "Country": "Vietnam"
                  },
                  {
                    "Year": 2000,
                    "NomineeID": "SF2000-010",
                    "NomineeName": "Alex Müller",
                    "Gender": "Male",
                    "FilmTitle": "Urban Nights",
                    "Country": "Germany"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "SF2024-032",
                    "NomineeName": "Sofia Rossi",
                    "Gender": "Female",
                    "FilmTitle": "Eternal Horizon",
                    "Country": "Italy"
                  }
                ]
              },
              {
                "CategoryName": "Bronze Frog Competition",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "BF1993-001",
                    "NomineeName": "Tomasz Nowak",
                    "Gender": "Male",
                    "FilmTitle": "Silent Streams",
                    "Country": "Poland"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "BF1994-002",
                    "NomineeName": "Aisha Khan",
                    "Gender": "Female",
                    "FilmTitle": "Golden Dusk",
                    "Country": "Pakistan"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "BF1995-003",
                    "NomineeName": "Hiroshi Tanaka",
                    "Gender": "Male",
                    "FilmTitle": "Crystal Rain",
                    "Country": "Japan"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "BF2024-032",
                    "NomineeName": "Emily Clark",
                    "Gender": "Female",
                    "FilmTitle": "Silver Lining",
                    "Country": "USA"
                  }
                ]
              },
              {
                "CategoryName": "Documentary Category",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "DOC1993-001",
                    "NomineeName": "Laura Müller",
                    "Gender": "Female",
                    "FilmTitle": "Earth's Pulse",
                    "Country": "Germany"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "DOC1994-002",
                    "NomineeName": "Carlos Mendes",
                    "Gender": "Male",
                    "FilmTitle": "Ocean Depths",
                    "Country": "Brazil"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "DOC1995-003",
                    "NomineeName": "Fatima Al-Sayed",
                    "Gender": "Female",
                    "FilmTitle": "Desert Winds",
                    "Country": "Egypt"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "DOC2024-032",
                    "NomineeName": "Liam O'Connor",
                    "Gender": "Male",
                    "FilmTitle": "Urban Landscapes",
                    "Country": "Ireland"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "DOC1995-003",
                    "NomineeName": "Maria Garcia",
                    "Gender": "Female",
                    "FilmTitle": "Nightfall Symphony",
                    "Country": "Spain"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "DOC2024-032",
                    "NomineeName": "Liam Johnson",
                    "Gender": "Male",
                    "FilmTitle": "Silent Echoes",
                    "Country": "Canada"
                  }
                ]
              },
              {
                "CategoryName": "Student Category",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "ST1993-001",
                    "NomineeName": "Nina Ivanova",
                    "Gender": "Female",
                    "FilmTitle": "First Light",
                    "Country": "Ukraine"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "ST1994-002",
                    "NomineeName": "Marcus Lee",
                    "Gender": "Male",
                    "FilmTitle": "Hidden Paths",
                    "Country": "South Korea"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "ST1995-003",
                    "NomineeName": "Sara Ahmed",
                    "Gender": "Female",
                    "FilmTitle": "Mountain Echoes",
                    "Country": "Saudi Arabia"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "ST2024-032",
                    "NomineeName": "Noah Thompson",
                    "Gender": "Male",
                    "FilmTitle": "Future Visions",
                    "Country": "Canada"
                  },
                  {
                    "Year": 2018,
                    "NomineeID": "ST2018-020",
                    "NomineeName": "Elena Ramirez",
                    "Gender": "Female",
                    "FilmTitle": "Dawn of Light",
                    "Country": "Mexico"
                  }
                ]
              },
              {
                "CategoryName": "Short Film Category",
                "Nominees": [
                  {
                    "Year": 1993,
                    "NomineeID": "SFIL1993-001",
                    "NomineeName": "Kevin Brown",
                    "Gender": "Male",
                    "FilmTitle": "Quick Glance",
                    "Country": "USA"
                  },
                  {
                    "Year": 1994,
                    "NomineeID": "SFIL1994-002",
                    "NomineeName": "Maya Singh",
                    "Gender": "Female",
                    "FilmTitle": "Brief Encounter",
                    "Country": "India"
                  },
                  {
                    "Year": 1995,
                    "NomineeID": "SFIL1995-003",
                    "NomineeName": "Igor Petrov",
                    "Gender": "Male",
                    "FilmTitle": "Momentary Thoughts",
                    "Country": "Russia"
                  },
                  {
                    "Year": 2020,
                    "NomineeID": "SFIL2020-015",
                    "NomineeName": "Liam Johnson",
                    "Gender": "Male",
                    "FilmTitle": "Silent Echoes",
                    "Country": "Canada"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "SFIL2024-032",
                    "NomineeName": "Zoe Taylor",
                    "Gender": "Female",
                    "FilmTitle": "Flash Memories",
                    "Country": "Australia"
                  }
                ]
              },
              {
                "CategoryName": "Best Animation",
                "Nominees": [
                  {
                    "Year": 2005,
                    "NomineeID": "BA2005-001",
                    "NomineeName": "Tomoko Sato",
                    "Gender": "Female",
                    "FilmTitle": "Animated Dreams",
                    "Country": "Japan"
                  },
                  {
                    "Year": 2006,
                    "NomineeID": "BA2006-002",
                    "NomineeName": "Lucas Martinez",
                    "Gender": "Male",
                    "FilmTitle": "Colorful Journeys",
                    "Country": "Spain"
                  },
                  {
                    "Year": 2024,
                    "NomineeID": "BA2024-030",
                    "NomineeName": "Aisha Bello",
                    "Gender": "Female",
                    "FilmTitle": "Whimsical Worlds",
                    "Country": "Nigeria"
                  }
                ]
              }
            ],
            "Anomalies": [
              {
                "Description": "Misclassified Nominee in Golden Frog",
                "Details": {
                  "Year": 1995,
                  "NomineeID": "GF1995-003",
                  "NomineeName": "Maria Garcia",
                  "GoldenFrogFilmTitle": "Nightfall Symphony",
                  "DocumentaryFilmTitle": "Nightfall Symphony",
                  "Issue": "Listed under both Golden Frog and Documentary categories."
                }
              },
              {
                "Description": "Duplicate Nominee Across Categories",
                "Details": {
                  "Year": 2000,
                  "NomineeID": "GF2000-010",
                  "NomineeName": "Alex Müller",
                  "GoldenFrogFilmTitle": "Urban Nights",
                  "SilverFrogFilmTitle": "Urban Nights",
                  "Issue": "Appears in both Golden Frog and Silver Frog competitions."
                }
              },
              {
                "Description": "Missing Year Representation",
                "Details": {
                  "Year": 2010,
                  "Category": "Golden Frog Competition",
                  "Issue": "No entries for Golden Frog Competition in 2010."
                }
              },
              {
                "Description": "Overlapping Film Titles",
                "Details": {
                  "Year": 2020,
                  "FilmTitle": "Silent Echoes",
                  "GoldenFrogNomineeID": "GF2020-025",
                  "ShortFilmNomineeID": "SFIL2020-015",
                  "Issue": "Same film title appears in both Golden Frog and Short Film categories."
                }
              },
              {
                "Description": "Incorrect Category Attribution",
                "Details": {
                  "Year": 2018,
                  "NomineeID": "GF2018-020",
                  "NomineeName": "Elena Ramirez",
                  "GoldenFrogFilmTitle": "Dawn of Light",
                  "StudentFilmTitle": "Dawn of Light",
                  "Issue": "Nominee categorized under Student Category instead of Golden Frog."
                }
              },
              {
                "Description": "Extra Category Introduced Midway",
                "Details": {
                  "YearIntroduced": 2005,
                  "CategoryName": "Best Animation",
                  "Issue": "New category introduced without updating verification prompts."
                }
              }
            ]
          }
        };

        class GoldenFrogApp {
            constructor(data) {
                this.data = data.CamerimageFestival;
                this.spinningCircle = document.getElementById('spinning-circle');
                this.narrativeOverlay = document.getElementById('narrative-overlay');
                this.narrativeContent = document.getElementById('narrative-content-inner');
                this.userInput = document.getElementById('user-input');
                this.submitButton = document.getElementById('submit-narrative');
                this.closeNarrativeBtn = document.getElementById('close-narrative');
                
                this.categories = this.data.Categories;
                this.anomalies = this.data.Anomalies;

                this.initializeApp();
            }

            initializeApp() {
                this.createNarrativePaths();
                this.attachEventListeners();
                this.generateAnomalyNotifications();
            }

            createNarrativePaths() {
                // For simplicity, use main categories as narrative paths
                // Exclude 'Anomalies' and focus on competition categories
                const competitionCategories = this.categories.filter(cat => cat.CategoryName.includes('Frog'));
                
                competitionCategories.forEach((category, index) => {
                    const box = document.createElement('div');
                    box.classList.add('narrative-box');
                    box.dataset.categoryName = category.CategoryName;
                    box.textContent = category.CategoryName.replace(' Competition', '');
                    // Calculate position around the circle
                    const angle = (360 / competitionCategories.length) * index;
                    const radius = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--circle-size')) / 2 - parseInt(getComputedStyle(document.documentElement).getPropertyValue('--box-size'));
                    const rad = angle * (Math.PI / 180);
                    const x = radius * Math.cos(rad);
                    const y = radius * Math.sin(rad);
                    box.style.transform = `translate(${x}px, ${y}px)`;
                    
                    box.addEventListener('click', () => this.openNarrativePath(category));
                    this.spinningCircle.appendChild(box);
                });
            }

            attachEventListeners() {
                this.submitButton.addEventListener('click', () => this.handleUserSubmission());
                this.closeNarrativeBtn.addEventListener('click', () => this.closeNarrativeOverlay());
                
                // Gesture-based interactions
                let touchStartX = 0;
                let touchEndX = 0;
                
                this.spinningCircle.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                });

                this.spinningCircle.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    this.handleGesture(touchStartX, touchEndX);
                });
            }

            handleGesture(start, end) {
                const diff = end - start;
                if (diff > 50) {
                    // Swipe Right - Rotate Clockwise
                    this.spinningCircle.style.animation = 'spin 60s linear infinite';
                } else if (diff < -50) {
                    // Swipe Left - Rotate Counter Clockwise
                    this.spinningCircle.style.animation = 'spin -60s linear infinite';
                }
            }

            handleUserSubmission() {
                const userInput = this.userInput.value.trim();
                if (userInput) {
                    this.createUserNarrative(userInput);
                    this.userInput.value = ''; // Clear input after submission
                }
            }

            openNarrativePath(category) {
                this.narrativeContent.innerHTML = `
                    <h2>${category.CategoryName}</h2>
                    <p>${this.getCategoryDescription(category.CategoryName)}</p>
                    <h3>Nominees:</h3>
                    <ul class="nominee-list">
                        ${category.Nominees.map(nom => `
                            <li><strong>${nom.NomineeName}</strong> (${nom.Year}) - "${nom.FilmTitle}" from ${nom.Country}</li>
                        `).join('')}
                    </ul>
                    <div class="data-visualization" id="${this.sanitizeCategoryName(category.CategoryName)}-viz"></div>
                `;
                this.narrativeOverlay.classList.remove('hidden');
                this.narrativeOverlay.classList.add('visible');
                
                // Render basic data visualization
                this.renderDataVisualization(category);
            }

            sanitizeCategoryName(name) {
                return name.toLowerCase().replace(/\s+/g, '-');
            }

            renderDataVisualization(category) {
                const vizContainer = document.getElementById(`${this.sanitizeCategoryName(category.CategoryName)}-viz`);
                // Simple visualization: Count of nominees by gender
                const genderCount = category.Nominees.reduce((acc, nom) => {
                    acc[nom.Gender] = (acc[nom.Gender] || 0) + 1;
                    return acc;
                }, {});
                
                vizContainer.innerHTML = `
                    <canvas id="${this.sanitizeCategoryName(category.CategoryName)}-canvas" width="300" height="200"></canvas>
                `;
                const ctx = document.getElementById(`${this.sanitizeCategoryName(category.CategoryName)}-canvas`).getContext('2d');
                const labels = Object.keys(genderCount);
                const data = Object.values(genderCount);
                const colors = ['#e74c3c', '#3498db', '#f1c40f', '#9b59b6'];

                // Simple bar chart
                const barWidth = 50;
                const maxData = Math.max(...data);
                const scale = 150 / maxData;

                labels.forEach((label, index) => {
                    const barHeight = data[index] * scale;
                    ctx.fillStyle = colors[index % colors.length];
                    ctx.fillRect(50 + index * (barWidth + 30), 180 - barHeight, barWidth, barHeight);
                    ctx.fillStyle = '#ecf0f1';
                    ctx.textAlign = 'center';
                    ctx.fillText(label, 50 + index * (barWidth + 30) + barWidth / 2, 195);
                    ctx.fillText(data[index], 50 + index * (barWidth + 30) + barWidth / 2, 175 - barHeight);
                });

                ctx.fillStyle = '#ecf0f1';
                ctx.font = '14px Arial';
                ctx.fillText('Nominees by Gender', 150, 20);
            }

            createUserNarrative(input) {
                const narrativeElement = document.createElement('div');
                narrativeElement.classList.add('user-narrative');
                narrativeElement.textContent = input;
                this.narrativeContent.appendChild(narrativeElement);
            }

            closeNarrativeOverlay() {
                this.narrativeOverlay.classList.remove('visible');
                this.narrativeOverlay.classList.add('hidden');
            }

            getCategoryDescription(categoryName) {
                // Placeholder descriptions based on category
                switch(categoryName) {
                    case 'Golden Frog Competition':
                        return 'The premier competition highlighting outstanding cinematography achievements.';
                    case 'Silver Frog Competition':
                        return 'Showcases excellent cinematography with notable artistic contributions.';
                    case 'Bronze Frog Competition':
                        return 'Recognizes commendable cinematography work with emerging talents.';
                    case 'Best Animation':
                        return 'Celebrates exceptional animated cinematography in various formats.';
                    default:
                        return 'Explore the narratives and data insights related to this category.';
                }
            }

            generateAnomalyNotifications() {
                if (this.anomalies && this.anomalies.length > 0) {
                    const anomalyBox = document.createElement('div');
                    anomalyBox.classList.add('narrative-box');
                    anomalyBox.style.backgroundColor = '#e67e22';
                    anomalyBox.textContent = 'Anomalies';
                    anomalyBox.style.transform = `translate(0px, -150px)`;
                    
                    anomalyBox.addEventListener('click', () => this.openAnomalyOverlay());
                    this.spinningCircle.appendChild(anomalyBox);
                }
            }

            openAnomalyOverlay() {
                this.narrativeContent.innerHTML = `
                    <h2>Anomalies Detected</h2>
                    <ul class="nominee-list">
                        ${this.anomalies.map(anomaly => `
                            <li><strong>${anomaly.Description}:</strong> ${anomaly.Details.Issue}</li>
                        `).join('')}
                    </ul>
                `;
                this.narrativeOverlay.classList.remove('hidden');
                this.narrativeOverlay.classList.add('visible');
            }
        }

        // Initialize the application when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            new GoldenFrogApp(camerimageData);
        });
    </script>
</body>
</html>
